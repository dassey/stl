
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>STL Model Viewer</title>
    <style>
        /* CSS (Cascading Style Sheets) */
        :root {
            --primary-color: #2c3e50; /* Dark Blue */
            --secondary-color: #3498db; /* Bright Blue */
            --light-color: #ecf0f1; /* Light Gray */
            --text-color: #34495e; /* Dark Gray Text */
            --accent-color: #e74c3c; /* Reddish Accent */
            --border-radius: 8px;
            --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            --font-family: 'Arial', sans-serif;
        }

        body {
            font-family: var(--font-family);
            margin: 0;
            padding: 0;
            background-color: var(--light-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start; /* Align content to the top */
            min-height: 100vh;
            overflow: hidden; /* Prevent scrollbars from dragon going off-edge */
        }

        header {
            background-color: var(--primary-color);
            color: var(--light-color);
            padding: 1em 0;
            text-align: center;
            width: 100%;
            box-shadow: var(--shadow);
            position: sticky; /* Make header sticky */
            top: 0;
            z-index: 1000;
        }

        header h1 {
            margin: 0;
            font-size: 1.8em;
            letter-spacing: 1px;
        }

        main {
            width: 100%;
            max-width: 900px; /* Max width for larger screens */
            padding: 20px;
            box-sizing: border-box; /* Include padding in width calculation */
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #viewer-container {
            width: 100%;
            aspect-ratio: 4 / 3; /* Maintain aspect ratio, good for 3D views */
            max-height: 60vh; /* Limit height on taller screens */
            background-color: #ffffff;
            border: 1px solid #bdc3c7; /* Lighter border */
            border-radius: var(--border-radius);
            margin-bottom: 25px;
            position: relative; /* For z-index stacking context */
            z-index: 50; /* To be above hidden dragon, below normal dragon/header */
            box-shadow: var(--shadow);
            overflow: hidden; /* Ensure nothing spills out */
        }

        #viewer-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #7f8c8d; /* Muted text color */
            text-align: center;
            padding: 20px;
            box-sizing: border-box;
        }

        #viewer-placeholder svg {
            width: 60px;
            height: 60px;
            margin-bottom: 15px;
            fill: var(--secondary-color);
        }

        .upload-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #ffffff;
            padding: 25px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            width: 100%;
            max-width: 400px; /* Control width of upload section */
            box-sizing: border-box;
            position: relative; /* For z-index stacking context */
            z-index: 50; /* To be above hidden dragon, below normal dragon/header */
        }

        .upload-button-wrapper {
            position: relative;
            overflow: hidden;
            display: inline-block;
            background-color: var(--secondary-color);
            color: var(--light-color);
            padding: 12px 25px;
            border-radius: var(--border-radius);
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            text-align: center;
        }

        .upload-button-wrapper:hover {
            background-color: #2980b9; /* Darker blue on hover */
            transform: translateY(-2px);
        }

        .upload-button-wrapper input[type="file"] {
            font-size: 100px; /* Make it large to cover the button */
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0; /* Make it invisible */
            cursor: pointer;
            height: 100%;
            width: 100%;
        }

        #file-name {
            margin-top: 15px;
            font-style: italic;
            color: var(--primary-color);
            word-break: break-all; /* Prevent long file names from breaking layout */
            max-width: 100%;
            text-align: center;
        }

        .instructions {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-top: 20px;
            text-align: center;
            line-height: 1.5;
        }

        /* Loading Spinner */
        .loader {
            border: 5px solid var(--light-color);
            border-top: 5px solid var(--secondary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10; /* Relative to viewer-container */
            display: none; /* Hidden by default */
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        /* Dragon Animation */
        #dragonAnimator {
            animation: dragonUndulate 3.5s ease-in-out infinite;
            transform-origin: 50% 60%; /* Pivots lower on the body */
        }

        @keyframes dragonUndulate { /* Makes the dragon subtly "wiggle" or "breathe" */
            0% { transform: skewY(-2deg) rotate(1deg) translateY(0px); }
            25% { transform: skewY(0deg) rotate(0deg) translateY(-2px); }
            50% { transform: skewY(2deg) rotate(-1deg) translateY(0px); }
            75% { transform: skewY(0deg) rotate(0deg) translateY(2px); }
            100% { transform: skewY(-2deg) rotate(1deg) translateY(0px); }
        }


        /* Mobile specific adjustments */
        @media (max-width: 600px) {
            header h1 {
                font-size: 1.5em;
            }
            .upload-button-wrapper {
                padding: 10px 20px;
                font-size: 1em;
            }
            main {
                padding: 15px;
            }
            .upload-section {
                padding: 20px;
            }
            #flyingDragon { /* Make dragon smaller on mobile */
                width: 120px !important; /* Use !important to override inline style if needed, though JS should adapt */
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>âœ¨ STL Model Viewer âœ¨</h1>
    </header>

    <main>
        <div id="viewer-container">
            <div id="viewer-placeholder">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"/>
                    <path d="M12.75 15.25c0 .41-.34.75-.75.75s-.75-.34-.75-.75V10c0-.41.34.75.75.75s.75.34.75.75v5.25zM11.25 7.5c0-.41.34.75.75.75s.75.34.75.75V6c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.5zm2.25 3.75c.41 0 .75-.34.75-.75V8.25c0-.41-.34-.75-.75-.75s-.75.34-.75.75v2.25c0 .41.34.75.75.75zm-3-3.75c.41 0 .75-.34.75-.75V6c0-.41-.34-.75-.75-.75s-.75.34-.75.75v1.5c0 .41.34.75.75.75zm1.5 9.75c-.41 0-.75.34-.75.75v1.5c0 .41.34.75.75.75s.75-.34.75-.75V18c0-.41-.34-.75-.75-.75zm3-1.5c0 .41-.34.75-.75.75s-.75-.34-.75-.75V14.25c0-.41.34-.75.75-.75s.75.34.75.75v2.25z"/>
                    <path fill="none" d="M0 0h24v24H0z"/>
                    <path d="M21.99 10.76c0-1.08-.39-2.07-.98-2.85l-1.72-2.29c-.23-.3-.55-.51-.9-.63C17.79 4.87 17 5 16.37 5.37l-2.03 1.22c-.12.07-.25.11-.39.11-.34 0-.65-.19-.8-.49l-.82-1.64c-.27-.54-.83-.86-1.42-.86s-1.15.32-1.42.86l-.82 1.64c-.15.3-.46.49-.8.49-.13 0-.26-.04-.39-.11L5.63 5.37C5 4.99 4.21 4.87 3.62 5c-.35.12-.67.32-.9.63l-1.72 2.29c-.59.78-.98 1.77-.98 2.85V19c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2v-8.24zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-5.5-2.5l2.03-3.04c.14-.21.39-.34.67-.34s.52.13.67.34l1.63 2.44 2.97-3.96c.15-.2.39-.32.66-.32s.51.12.66.32l3.51 4.68H6.5z"/>
                </svg>
                <p>Your 3D model will appear here.</p>
                <p>Click the button below to upload an .STL file.</p>
            </div>
            <div class="loader" id="loader"></div>
        </div>

        <section class="upload-section">
            <div class="upload-button-wrapper">
                <span>ðŸš€ Upload STL File</span>
                <input type="file" id="file-input" accept=".stl">
            </div>
            <p id="file-name">No file selected.</p>
            <p class="instructions">
                Once uploaded, you can: <br>
                <b>Drag</b> to rotate. <br>
                <b>Scroll</b> (or pinch on mobile) to zoom. <br>
                <b>Right-click/Two-finger drag</b> to pan.
            </p>
        </section>
    </main>

    <!-- Flying Dragon SVG -->
    <svg id="flyingDragon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 554.072 351.181"
         style="position: fixed; width: 200px; height: auto; opacity: 0; z-index: 60; pointer-events: none;
                transition: transform 3s cubic-bezier(0.65, 0, 0.35, 1), opacity 1.5s ease-in-out;">
        <g id="dragonAnimator"> {/* This group is for the CSS wiggle/undulate animation */}
            <g id="dragonBody" fill="#c0392b" stroke="#a12312" stroke-width="1.5">
                <path d="M117.26,75.87c-0.03-0.01-0.07-0.01-0.1-0.02c-0.8-0.31-1.41-0.98-1.63-1.81c-0.09-0.32-0.12-0.65-0.07-0.98
                c0.05-0.32,0.19-0.63,0.39-0.89c0.01-0.01,0.01-0.02,0.02-0.03l25.23-29.8c0.26-0.31,0.63-0.5,1.03-0.5h13.81
                c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-12.97l-23.34,27.58l4.76,4.33c0.21,0.19,0.49,0.3,0.77,0.3
                c0.37,0,0.73-0.19,0.94-0.52l6.92-10.93c0.23-0.36,0.64-0.59,1.08-0.59h10.46c0.93,0,1.7,0.76,1.7,1.7v3.88
                c0,0.93-0.76,1.7-1.7,1.7h-9.62l-7.04,11.12l10.09,8.34c0.29,0.24,0.68,0.37,1.08,0.37c0.28,0,0.56-0.08,0.8-0.23l32.63-20.44
                c0.35-0.22,0.78-0.34,1.23-0.34H185c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-12.87L142.6,96.44l5.83,3.9
                c0.32,0.21,0.71,0.33,1.12,0.33c0.26,0,0.52-0.06,0.76-0.19l25.08-13.96c0.36-0.2,0.79-0.31,1.24-0.31h14.71
                c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7h-13.87l-25.2,14.03l7.64,6.03c0.3,0.24,0.7,0.37,1.11,0.37
                c0.27,0,0.54-0.07,0.78-0.22l22.83-14.42c0.36-0.23,0.8-0.35,1.25-0.35h22.04c0.93,0,1.7,0.76,1.7,1.7v3.88
                c0,0.93-0.76,1.7-1.7,1.7h-21.2l-22.95,14.5l9.22,7.08c0.31,0.23,0.71,0.36,1.12,0.36l0,0c0.27,0,0.53-0.07,0.77-0.21
                l27.28-16.22c0.36-0.21,0.79-0.33,1.24-0.33h10.16c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-9.32l-27.4,16.29
                l3.23,2.19c0.33,0.22,0.73,0.35,1.15,0.35c0.25,0,0.5-0.06,0.73-0.18l22.19-11.71c0.37-0.19,0.8-0.3,1.25-0.3h15.03
                c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7h-14.19l-22.31,11.77l5.07,3.29c0.33,0.21,0.74,0.33,1.16,0.33
                c0.24,0,0.48-0.06,0.7-0.17l20.11-10.26c0.37-0.19,0.8-0.29,1.25-0.29h10.13c0.93,0,1.7,0.76,1.7,1.7v4.38
                c0,0.93-0.76,1.7-1.7,1.7h-9.29l-20.23,10.32l7.76,4.79c0.32,0.2,0.71,0.3,1.11,0.3c0.26,0,0.51-0.06,0.74-0.18l21.01-10.5
                c0.37-0.19,0.8-0.29,1.25-0.29h10.13c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-9.29L300.36,179l9.05,5.38
                c0.32,0.19,0.7,0.29,1.1,0.29c0.26,0,0.52-0.06,0.75-0.17L332.9,174.1c0.37-0.21,0.81-0.32,1.26-0.32h15.43
                c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7h-14.59l-21.64,10.4l7.4,4.27c0.32,0.19,0.71,0.29,1.11,0.29
                c0.26,0,0.51-0.06,0.74-0.17l18.98-9.48c0.37-0.19,0.8-0.29,1.25-0.29h13.4c0.93,0,1.7,0.76,1.7,1.7v4.38
                c0,0.93-0.76,1.7-1.7,1.7h-12.56l-19.1,9.54l6.65,3.66c0.33,0.18,0.72,0.28,1.12,0.28c0.25,0,0.5-0.05,0.73-0.16l18.59-8.84
                c0.37-0.18,0.8-0.27,1.24-0.27h14.76c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7H400.7l-18.71,8.9l6.72,3.54
                c0.33,0.17,0.72,0.27,1.13,0.27c0.25,0,0.49-0.05,0.72-0.15l18.08-8.22c0.38-0.17,0.81-0.26,1.25-0.26h12.08
                c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-11.24l-18.2,8.27l8.51,4.29c0.32,0.16,0.69,0.25,1.07,0.25
                c0.27,0,0.54-0.05,0.78-0.16l22.17-9.69c0.37-0.16,0.79-0.24,1.22-0.24h12.08c0.93,0,1.7,0.76,1.7,1.7v4.38
                c0,0.93-0.76,1.7-1.7,1.7h-11.24l-22.29,9.75l11.38,5.45c0.32,0.15,0.68,0.23,1.05,0.23c0.28,0,0.56-0.05,0.8-0.15l26.02-11.01
                c0.37-0.16,0.79-0.24,1.22-0.24h12.08c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-11.24l-26.14,11.06l10.18,4.7
                c0.32,0.15,0.67,0.22,1.03,0.22c0.29,0,0.58-0.05,0.83-0.16l22.46-9.19c0.37-0.15,0.79-0.23,1.21-0.23h10.06
                c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-9.22l-22.58,9.24l7.32,3.14c0.33,0.14,0.69,0.21,1.05,0.21
                c0.28,0,0.56-0.05,0.81-0.14l16.99-6.57c0.38-0.15,0.8-0.22,1.23-0.22h10.06c0.93,0,1.7,0.76,1.7,1.7v4.38
                c0,0.93-0.76,1.7-1.7,1.7h-9.22l-17.11,6.61l6.18,2.43c0.33,0.13,0.68,0.2,1.03,0.2c0.29,0,0.57-0.04,0.82-0.13l13.78-4.9
                c0.38-0.14,0.8-0.21,1.22-0.21H530.4c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7h-13.51l-13.9,4.94l2.69,0.87
                c0.62,0.2,1.03,0.78,1.03,1.43c0,0.93-0.76,1.7-1.7,1.7c-0.71,0-1.33-0.44-1.58-1.08l-2.52-6.47l-12.87,4.58
                c-0.28,0.1-0.58,0.15-0.88,0.15c-0.53,0-1.04-0.21-1.41-0.59l-5.72-5.72c-0.14-0.14-0.26-0.3-0.35-0.47
                c-0.11-0.21-0.17-0.43-0.17-0.66v-4.38c0-0.93,0.76-1.7,1.7-1.7h0.11c0.21,0,0.42,0.05,0.6,0.14l4.76,2.38l12.16-4.32l-2.19-5.62
                c-0.25-0.64-0.87-1.08-1.58-1.08c-0.93,0-1.7,0.76,1.7-1.7c0,0.65,0.4,1.23,1.03,1.43l1.82,0.59l-13.78,4.9
                c-0.25,0.09-0.53,0.13-0.82,0.13c-0.35,0-0.7-0.07-1.03-0.2l-6.18-2.43l17.11-6.61h9.22c0.93,0,1.7-0.76,1.7-1.7v-4.38
                c0-0.93-0.76-1.7-1.7-1.7h-10.06c-0.43,0-0.85,0.08-1.23,0.22l-16.99,6.57c-0.25,0.1-0.53,0.14-0.81,0.14
                c-0.36,0-0.72-0.07-1.05-0.21l-7.32-3.14l22.58-9.24h9.22c0.93,0,1.7-0.76,1.7-1.7v-4.38c0-0.93-0.76-1.7-1.7-1.7h-10.06
                c-0.42,0-0.84,0.08-1.21,0.23l-22.46,9.19c-0.25,0.1-0.54,0.16-0.83,0.16c-0.36,0-0.71-0.07-1.03-0.22l-10.18-4.7l26.14-11.06
                h11.24c0.93,0,1.7-0.76,1.7-1.7v-4.38c0-0.93-0.76-1.7-1.7-1.7h-12.08c-0.43,0-0.85,0.08-1.22,0.24l-26.02,11.01
                c-0.24,0.1-0.52,0.15-0.8,0.15c-0.37,0-0.73-0.08-1.05-0.23L433.8,230l22.29-9.75h11.24c0.93,0,1.7-0.76,1.7-1.7v-4.38
                c0-0.93-0.76-1.7-1.7-1.7h-12.08c-0.43,0-0.85,0.08-1.22,0.24l-22.17,9.69c-0.24,0.1-0.51,0.16-0.78,0.16
                c-0.37,0-0.75-0.08-1.07-0.25l-8.51-4.29l18.2-8.27h11.24c0.93,0,1.7-0.76,1.7-1.7v-4.38c0-0.93-0.76-1.7-1.7-1.7h-12.08
                c-0.44,0-0.87,0.09-1.25,0.26l-18.08,8.22c-0.23,0.1-0.47,0.15-0.72,0.15c-0.41,0-0.8-0.09-1.13-0.27l-6.72-3.54l18.71-8.9
                h13.86c0.93,0,1.7-0.76,1.7-1.7v-3.88c0-0.93-0.76-1.7-1.7-1.7h-14.76c-0.44,0-0.87,0.09-1.24,0.27l-18.59,8.84
                c-0.23,0.11-0.48,0.16-0.73,0.16c-0.4,0-0.79-0.1-1.12-0.28l-6.65-3.66l19.1-9.54h12.56c0.93,0,1.7-0.76,1.7-1.7v-4.38
                c0-0.93-0.76-1.7-1.7-1.7h-13.4c-0.45,0-0.88,0.1-1.25,0.29l-18.98,9.48c-0.23,0.11-0.48,0.17-0.74,0.17
                c-0.4,0-0.79-0.1-1.11-0.29l-7.4-4.27l21.64-10.4h14.59c0.93,0,1.7-0.76,1.7-1.7v-3.88c0-0.93-0.76-1.7-1.7-1.7h-15.43
                c-0.45,0-0.89,0.11-1.26,0.32L310.44,184l-9.05-5.38h9.29c0.93,0,1.7-0.76,1.7-1.7v-4.38c0-0.93-0.76-1.7-1.7-1.7h-10.13
                c-0.45,0-0.88,0.1-1.25,0.29l-21.01,10.5c-0.23,0.11-0.48,0.18-0.74,0.18c-0.4,0-0.79-0.1-1.11-0.3l-7.76-4.79l20.23-10.32h9.29
                c0.93,0,1.7-0.76,1.7-1.7v-4.38c0-0.93-0.76-1.7-1.7-1.7h-10.13c-0.45,0-0.88,0.1-1.25,0.29l-20.11,10.26
                c-0.22,0.11-0.46,0.17-0.7,0.17c-0.42,0-0.83-0.11-1.16-0.33l-5.07-3.29l22.31-11.77h14.19c0.93,0,1.7-0.76,1.7-1.7v-3.88
                c0-0.93-0.76-1.7-1.7-1.7h-15.03c-0.45,0-0.88,0.11-1.25,0.3l-22.19,11.71c-0.23,0.12-0.48,0.18-0.73,0.18
                c-0.42,0-0.82-0.12-1.15-0.35l-3.23-2.19l27.4-16.29h9.32c0.93,0,1.7-0.76,1.7-1.7v-4.38c0-0.93-0.76-1.7-1.7-1.7h-10.16
                c-0.45,0-0.88,0.12-1.24,0.33l-27.28,16.22c-0.24,0.14-0.5,0.21-0.77,0.21l0,0c-0.41,0-0.81-0.12-1.12-0.36l-9.22-7.08
                L220.76,106h21.2c0.93,0,1.7-0.76,1.7-1.7v-3.88c0-0.93-0.76-1.7-1.7-1.7h-22.04c-0.45,0-0.89,0.12-1.25,0.35l-22.83,14.42
                c-0.24,0.15-0.51,0.22-0.78,0.22c-0.41,0-0.81-0.13-1.11-0.37l-7.64-6.03l25.2-14.03h13.87c0.93,0,1.7-0.76,1.7-1.7v-3.88
                c0-0.93-0.76-1.7-1.7-1.7h-14.71c-0.45,0-0.88,0.11-1.24,0.31l-25.08,13.96c-0.24,0.13-0.5,0.19-0.76,0.19
                c-0.41,0-0.8-0.11-1.12-0.33l-5.83-3.9l29.53-19.13h12.87c0.93,0,1.7-0.76,1.7-1.7V60.5c0-0.93-0.76-1.7-1.7-1.7H169.4
                c-0.45,0-0.88,0.12-1.23,0.34L135.54,79.6c-0.24,0.16-0.52,0.23-0.8,0.23c-0.4,0-0.79-0.13-1.08-0.37l-10.09-8.34l7.04-11.12
                h9.62c0.93,0,1.7-0.76,1.7-1.7v-3.88c0-0.93-0.76-1.7-1.7-1.7h-10.46c-0.44,0-0.85,0.23-1.08,0.59l-6.92,10.93
                c-0.21,0.33-0.57,0.52-0.94,0.52c-0.28,0-0.56-0.11-0.77-0.3l-4.76-4.33l23.34-27.58h12.97c0.93,0,1.7-0.76,1.7-1.7v-4.38
                c0-0.93-0.76-1.7-1.7-1.7h-13.81c-0.4,0-0.77,0.19-1.03,0.5l-25.23,29.8c-0.01,0.01-0.01,0.02-0.02,0.03
                c-0.2,0.26-0.34,0.56-0.39,0.89c-0.05,0.32,0,0.66,0.07,0.98c0.22,0.83,0.83,1.5,1.63,1.81c0.03,0.01,0.07,0.01,0.1,0.02
                l0.12,0.04c0.35,0.11,0.63,0.35,0.8,0.68c0.11,0.21,0.17,0.44,0.17,0.68v22.71c0,0.39-0.13,0.75-0.34,1.04
                c-0.05,0.06-0.09,0.12-0.14,0.18l-13.43,15.87c-0.26,0.31-0.63,0.5-1.03,0.5H89.05c-0.93,0-1.7-0.76-1.7-1.7v-4.38
                c0-0.93,0.76-1.7,1.7-1.7h12.97l11.56-13.66l-3.39-3.08c-0.65-0.59-0.73-1.59-0.18-2.22l3.88-4.45
                c0.21-0.24,0.34-0.55,0.34-0.88V79.11c0-0.93-0.76-1.7-1.7-1.7h-2.22c-0.45,0-0.87,0.16-1.19,0.43l-11.29,9.61
                c-0.26,0.22-0.46,0.5-0.58,0.81c-0.12,0.31-0.16,0.64-0.12,0.96l1.41,11.25c0.09,0.76-0.16,1.51-0.68,2.07l-4.38,4.66
                c-0.22,0.23-0.5,0.41-0.8,0.53L61.2,115.13c-0.72,0.29-1.51,0.24-2.19-0.13l-9.89-5.4c-0.28-0.15-0.59-0.24-0.92-0.24H35.09
                c-0.93,0-1.7-0.76-1.7-1.7v-4.38c0-0.93,0.76-1.7,1.7-1.7h13.11l8.13,4.43l4.01-7.04c0.19-0.34,0.52-0.56,0.9-0.56h10.46
                c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7H62.8l-4.12,7.23l-7.21-5.23c-0.63-0.46-1.48-0.52-2.17-0.15L35.09,117.8
                c-0.93,0.51-1.32,1.64-0.81,2.57l5.19,9.47c0.21,0.38,0.58,0.64,1,0.73l11.15,2.33c0.12,0.02,0.24,0.04,0.36,0.04
                c0.63,0,1.24-0.25,1.69-0.7l7.81-7.81c0.04-0.04,0.08-0.08,0.12-0.12l12.03-13.21c0.2-0.22,0.47-0.37,0.76-0.44l10.09-2.69
                c0.44-0.12,0.9-0.04,1.28,0.21l11.04,7.23c0.33,0.22,0.74,0.34,1.16,0.34c0.24,0,0.47-0.05,0.69-0.14l26.08-11.21
                c0.37-0.16,0.79-0.24,1.22-0.24h23.32c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7h-22.48l-26.2,11.26l3.04,2.25
                c0.34,0.25,0.76,0.4,1.19,0.4c0.22,0,0.44-0.04,0.65-0.13L145.15,111c0.38-0.17,0.81-0.26,1.25-0.26h22.04
                c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7h-21.2l-24.48,11.01l4.58,3.27c0.33,0.24,0.75,0.37,1.18,0.37
                c0.22,0,0.43-0.04,0.64-0.12l25.65-11.26c0.37-0.16,0.8-0.25,1.24-0.25h10.16c0.93,0,1.7,0.76,1.7,1.7v4.38
                c0,0.93-0.76,1.7-1.7,1.7h-9.32l-25.77,11.31l1.47,0.92c0.35,0.22,0.77,0.34,1.2,0.34c0.21,0,0.42-0.04,0.62-0.11l23.17-8.56
                c0.38-0.14,0.81-0.22,1.25-0.22H209c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7h-14.49l-23.29,8.6l1.61,0.95
                c0.35,0.2,0.76,0.31,1.19,0.31c0.21,0,0.42-0.03,0.62-0.1l22.01-7.79c0.38-0.13,0.8-0.21,1.24-0.21h10.13
                c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-9.29l-22.13,7.83l3.3,1.81c0.34,0.19,0.75,0.29,1.17,0.29
                c0.21,0,0.42-0.03,0.62-0.1l20.86-7.02c0.38-0.13,0.8-0.2,1.24-0.2h10.13c0.93,0,1.7,0.76,1.7,1.7v4.38
                c0,0.93-0.76,1.7-1.7,1.7h-9.29l-20.98,7.06l5.44,2.8c0.34,0.17,0.74,0.27,1.16,0.27c0.21,0,0.42-0.03,0.62-0.09l20.2-5.98
                c0.38-0.11,0.8-0.18,1.23-0.18h15.43c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7h-14.59l-20.32,6.01l5.71,2.82
                c0.34,0.17,0.73,0.26,1.15,0.26c0.21,0,0.42-0.03,0.62-0.09l19.59-5.47c0.38-0.11,0.8-0.17,1.23-0.17h13.4
                c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-12.56l-19.71,5.5l5.43,2.55c0.34,0.16,0.73,0.25,1.14,0.25
                c0.21,0,0.42-0.03,0.62-0.09l19.22-5.07c0.38-0.1,0.8-0.16,1.22-0.16h14.76c0.93,0,1.7,0.76,1.7,1.7v3.88
                c0,0.93-0.76,1.7-1.7,1.7H315.7l-19.34,5.1l4.02,1.79c0.35,0.15,0.74,0.24,1.15,0.24c0.21,0,0.41-0.03,0.61-0.08l18.03-4.4
                c0.38-0.09,0.79-0.14,1.21-0.14h12.08c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-11.24l-18.15,4.43l6.09,2.54
                c0.34,0.14,0.72,0.22,1.12,0.22c0.22,0,0.44-0.03,0.64-0.08l20.78-4.84c0.38-0.09,0.79-0.14,1.21-0.14h12.08
                c0.93,0,1.7,0.76,1.7,1.7v4.38c0,0.93-0.76,1.7-1.7,1.7h-11.24l-20.9,4.87l8.31,3.29C356.85,211.45,358.91,211.35,360.71,210.22z
                M56.28,230.11l-4.04-4.29c-0.48-0.51-1.16-0.8-1.88-0.8c-0.77,0-1.49,0.34-2.01,0.9l-6.7,7.28c-0.21,0.23-0.35,0.51-0.4,0.81
                l-1.67,13.29c-0.05,0.38,0.01,0.77,0.17,1.11c0.16,0.34,0.42,0.62,0.75,0.8l10.42,5.73c0.28,0.15,0.59,0.24,0.92,0.24h13.11
                c0.93,0,1.7-0.76,1.7-1.7v-4.38c0-0.93-0.76-1.7-1.7-1.7H49.49l-8.13-4.43l-3.03,5.32c-0.38,0.68-1.23,0.98-1.97,0.68l-4.62-1.84
                c-0.74-0.29-1.1-1.12-0.8-1.86l3.76-9.14c0.02-0.05,0.04-0.1,0.06-0.14L56.28,230.11z M24.73,269.34l-0.88-7.03
                c-0.09-0.76,0.16-1.51,0.68-2.07l4.38-4.66c0.22-0.23,0.5-0.41,0.8-0.53l20.47-6.82c0.72-0.29,1.51-0.24,2.19,0.13l9.89,5.4
                c0.28,0.15,0.59,0.24,0.92,0.24h13.11c0.93,0,1.7,0.76,1.7,1.7v3.88c0,0.93-0.76,1.7-1.7,1.7H64.38l-8.13-4.43l-4.01,7.04
                c-0.19,0.34-0.52,0.56-0.9,0.56H40.88c-0.93,0-1.7-0.76,1.7-1.7v-4.38c0-0.93,0.76-1.7,1.7-1.7h10.61l4.12-7.23l7.21,5.23
                c0.63,0.46,1.48,0.52,2.17,0.15L78.91,250c0.93-0.51,1.32-1.64,0.81-2.57l-5.19-9.47c-0.21-0.38-0.58-0.64-1-0.73l-11.15-2.33
                c-0.12-0.02-0.24-0.04-0.36-0.04c-0.63,0-1.24,0.25-1.69,0.7l-7.81,7.81c-0.04,0.04-0.08,0.08-0.12,0.12l-12.03,13.21
                c-0.2,0.22-0.47,0.37-0.76,0.44l-10.09,2.69c-0.44,0.12-0.9,0.04-1.28-0.21l-7.25-4.75L24.73,269.34z M3.23,309.23
                c-0.02,0.16-0.04,0.32-0.04,0.48c0,0.88,0.72,1.6,1.6,1.6h11.39c0.21,0,0.41-0.04,0.6-0.12l16.12-6.04
                c0.3-0.11,0.56-0.29,0.76-0.52c0.2-0.23,0.33-0.51,0.38-0.82l1.67-13.29c0.05-0.38-0.01-0.77-0.17-1.11s-0.42-0.62-0.75-0.8
                l-10.42-5.73c-0.28-0.15-0.59-0.24-0.92-0.24H7.28c-0.93,0-1.7,0.76-1.7,1.7v4.38c0,0.93,0.76,1.7,1.7-1.7h13.11l-3.31,5.81
                c-0.38,0.68-1.23,0.98-1.97,0.68l-4.62-1.84c-0.74-0.29-1.1-1.12-0.8-1.86L13.24,300c0-0.01,0-0.01,0-0.02L3.23,309.23z
                M24.71,343.12c0.16,0.02,0.32,0.04,0.48,0.04c0.88,0,1.6-0.72,1.6-1.6v-11.39c0-0.21-0.04-0.41-0.12-0.6l-6.04-16.12
                c-0.11-0.3-0.29-0.56-0.52-0.76s-0.51-0.33-0.82-0.38l-13.29-1.67c-0.38-0.05-0.77,0.01-1.11,0.17s-0.62,0.42-0.8,0.75
                l-5.73,10.42c-0.15,0.28-0.24,0.59-0.24,0.92v13.11c0,0.93,0.76,1.7,1.7,1.7h4.38c0.93,0,1.7-0.76,1.7-1.7v-13.11l5.81-3.31
                c0.68-0.38,0.98-1.23,0.68-1.97l-1.84-4.62c-0.29-0.74,0.12-1.57,0.86-1.86l9.14-3.76c0.05-0.02,0.1-0.04,0.14-0.06l7.03,0.88
                L24.71,343.12z"/>
            </g>
        </g>
    </svg>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/STLLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // JavaScript for STL Viewer (mostly unchanged)
        let scene, camera, renderer, mesh, controls;
        const viewerContainer = document.getElementById('viewer-container');
        const fileInput = document.getElementById('file-input');
        const fileNameDisplay = document.getElementById('file-name');
        const loaderElement = document.getElementById('loader');
        const placeholder = document.getElementById('viewer-placeholder');

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xeeeeee);
            camera = new THREE.PerspectiveCamera(75, viewerContainer.clientWidth / viewerContainer.clientHeight, 0.1, 1000);
            camera.position.set(50, 50, 50);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(viewerContainer.clientWidth, viewerContainer.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            viewerContainer.appendChild(renderer.domElement);
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(100, 100, 100);
            scene.add(directionalLight);
            const pointLight = new THREE.PointLight(0xffffff, 0.5);
            pointLight.position.set(-100, -50, -50);
            scene.add(pointLight);
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.screenSpacePanning = true;
            controls.minDistance = 10;
            controls.maxDistance = 500;
            controls.target.set(0,0,0);
            controls.update();
            window.addEventListener('resize', onWindowResize, false);
            animate();
        }

        function onWindowResize() {
            if (camera && renderer && viewerContainer) {
                camera.aspect = viewerContainer.clientWidth / viewerContainer.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(viewerContainer.clientWidth, viewerContainer.clientHeight);
            }
            if (dragon) { // Update dragon dimensions on resize
                const cs = getComputedStyle(dragon);
                dragonWidth = parseFloat(cs.width);
                dragonHeight = parseFloat(cs.height);
            }
        }

        function animate() {
            requestAnimationFrame(animate);
            if (controls) controls.update();
            if (renderer && scene && camera) renderer.render(scene, camera);
        }

        function loadSTL(file) {
            if (!file) return;
            fileNameDisplay.textContent = `Selected: ${file.name}`;
            loaderElement.style.display = 'block';
            placeholder.style.display = 'none';
            const reader = new FileReader();
            reader.onload = function (event) {
                const contents = event.target.result;
                const loaderSTL = new THREE.STLLoader();
                const geometry = loaderSTL.parse(contents);
                if (!geometry.attributes.normal) { geometry.computeVertexNormals(); }
                if (mesh) {
                    scene.remove(mesh);
                    mesh.geometry.dispose();
                    mesh.material.dispose();
                }
                const material = new THREE.MeshStandardMaterial({
                    color: 0x007bff, metalness: 0.3, roughness: 0.6, flatShading: false
                });
                mesh = new THREE.Mesh(geometry, material);
                const boundingBox = new THREE.Box3().setFromObject(mesh);
                const center = boundingBox.getCenter(new THREE.Vector3());
                const size = boundingBox.getSize(new THREE.Vector3());
                mesh.position.sub(center);
                const maxDim = Math.max(size.x, size.y, size.z);
                const scale = 100 / maxDim;
                mesh.scale.set(scale, scale, scale);
                scene.add(mesh);
                controls.target.copy(mesh.position);
                camera.lookAt(mesh.position);
                const distance = maxDim * scale * 1.5;
                const direction = new THREE.Vector3(1, 1, 1).normalize();
                camera.position.copy(direction).multiplyScalar(distance).add(mesh.position);
                controls.update();
                loaderElement.style.display = 'none';
            };
            reader.onerror = function (event) {
                console.error("File could not be read! Code " + event.target.error.code);
                fileNameDisplay.textContent = 'Error loading file.';
                loaderElement.style.display = 'none';
                placeholder.style.display = 'flex';
            };
            reader.readAsArrayBuffer(file);
        }

        fileInput.addEventListener('change', function (event) {
            const file = event.target.files[0];
            if (file) { loadSTL(file); }
            else {
                fileNameDisplay.textContent = 'No file selected.';
                if (!mesh) placeholder.style.display = 'flex';
            }
        });

        init();

        // --- Flying Dragon JavaScript ---
        const dragon = document.getElementById('flyingDragon');
        let dragonWidth = 200; // Default, will be updated
        let dragonHeight = dragonWidth * (351.181 / 554.072); // Aspect ratio

        let dragonIsFlipped = false;
        let dragonCurrentX = 0;
        let dragonCurrentY = 0;
        let dragonMoveTimeoutId = null;

        const DRAGON_NORMAL_Z_INDEX = '60';
        const DRAGON_HIDDEN_Z_INDEX = '40';

        const occluders = [];

        let dragonState = 'flying'; // 'flying', 'approachingHide', 'peeking', 'fullyHidden'
        let hideTargetElement = null;
        let hideAttempts = 0;
        const MAX_HIDE_ATTEMPTS = 4; // How many peeks/re-hides before emerging

        let flyingTargetX, flyingTargetY; // For two-step flying path
        let isFlyingStep2 = false;

        function initDragon() {
            if (!dragon) return;
            
            const cs = getComputedStyle(dragon);
            dragonWidth = parseFloat(cs.width);
            dragonHeight = parseFloat(cs.height);

            const viewer = document.getElementById('viewer-container');
            const uploader = document.querySelector('.upload-section');
            if (viewer) occluders.push(viewer);
            if (uploader) occluders.push(uploader);

            dragonCurrentX = Math.random() * (window.innerWidth - dragonWidth);
            dragonCurrentY = Math.random() * (window.innerHeight - dragonHeight);
            dragon.style.transform = `translate(${dragonCurrentX}px, ${dragonCurrentY}px) scaleX(1)`;
            dragon.style.zIndex = DRAGON_NORMAL_Z_INDEX;
            
            setTimeout(() => {
                dragon.style.opacity = '0.85'; // Initial fade-in
                updateDragonPosition(); 
                scheduleNextDragonMove();
            }, 500);
        }

        function updateDragonPosition() {
            if (!dragon) return;

            const W = window.innerWidth;
            const H = window.innerHeight;
            let targetX = dragonCurrentX, targetY = dragonCurrentY; // Default to current if no move

            // --- State-based target selection ---
            if (dragonState === 'peeking' || dragonState === 'fullyHidden') {
                if (!hideTargetElement) { 
                    dragonState = 'flying'; // Safeguard
                } else if (hideAttempts >= MAX_HIDE_ATTEMPTS || Math.random() < 0.35) { // Emerge
                    dragonState = 'flying';
                    isFlyingStep2 = false; 
                    hideAttempts = 0;
                    hideTargetElement = null;
                    // targetX/Y will be set by flying logic below
                } else { // Continue hiding/peeking
                    hideAttempts++;
                    const oRect = hideTargetElement.getBoundingClientRect();
                    if (dragonState === 'fullyHidden' && Math.random() < 0.75) { 
                        dragonState = 'peeking';
                        // Peek from a random edge of the occluder
                        const edge = Math.random();
                        if (edge < 0.25) { // Peek from left
                            targetX = oRect.left - dragonWidth * (0.3 + Math.random() * 0.4); // More of dragon shows
                            targetY = oRect.top + Math.random() * (oRect.height - dragonHeight);
                        } else if (edge < 0.5) { // Peek from right
                            targetX = oRect.right - dragonWidth * (0.3 - Math.random() * 0.4);
                            targetY = oRect.top + Math.random() * (oRect.height - dragonHeight);
                        } else if (edge < 0.75) { // Peek from top
                            targetX = oRect.left + Math.random() * (oRect.width - dragonWidth);
                            targetY = oRect.top - dragonHeight * (0.3 + Math.random() * 0.4);
                        } else { // Peek from bottom
                            targetX = oRect.left + Math.random() * (oRect.width - dragonWidth);
                            targetY = oRect.bottom - dragonHeight * (0.3 - Math.random() * 0.4);
                        }
                        dragon.style.opacity = '0.65';
                    } else { 
                        dragonState = 'fullyHidden';
                        // Move deeper behind the center of the occluder
                        targetX = oRect.left + (oRect.width - dragonWidth) / 2 + (Math.random() - 0.5) * oRect.width * 0.3;
                        targetY = oRect.top + (oRect.height - dragonHeight) / 2 + (Math.random() - 0.5) * oRect.height * 0.3;
                        dragon.style.opacity = '0.45';
                    }
                }
            }
            
            // This 'else if' covers initiating a hide, or continuing from 'approachingHide'
            if (dragonState === 'approachingHide' || (dragonState === 'flying' && occluders.length > 0 && Math.random() < 0.15)) {
                if (dragonState === 'flying') { // Initiate hide
                    const potentialOccluder = occluders[Math.floor(Math.random() * occluders.length)];
                    const oRect = potentialOccluder.getBoundingClientRect();
                    if (oRect.width > 50 && oRect.height > 50 && oRect.bottom > 0 && oRect.top < H && oRect.right > 0 && oRect.left < W) {
                        dragonState = 'approachingHide';
                        hideTargetElement = potentialOccluder;
                        hideAttempts = 0;
                        // Approach the center of the occluder
                        targetX = oRect.left + (oRect.width - dragonWidth) / 2;
                        targetY = oRect.top + (oRect.height - dragonHeight) / 2;
                    } else {
                        dragonState = 'flying'; // Occluder not suitable, stay flying
                    }
                } else { // dragonState is 'approachingHide' and has arrived (this logic runs after move)
                     // Transition to actual hiding state for the *next* move cycle
                    dragonState = (Math.random() < 0.5) ? 'fullyHidden' : 'peeking';
                    // The current move was to approachTarget. Next updateDragonPosition will use new hide state.
                }
            }
            
            // Default: Flying logic (also if emerging from hide)
            if (dragonState === 'flying') {
                dragon.style.zIndex = DRAGON_NORMAL_Z_INDEX;
                dragon.style.opacity = '0.85';

                if (isFlyingStep2) {
                    targetX = flyingTargetX;
                    targetY = flyingTargetY;
                    isFlyingStep2 = false; 
                } else {
                    flyingTargetX = Math.random() * (W - dragonWidth);
                    flyingTargetY = Math.random() * (H - dragonHeight);

                    const midX = (dragonCurrentX + flyingTargetX) / 2;
                    const midY = (dragonCurrentY + flyingTargetY) / 2;
                    const dX = flyingTargetX - dragonCurrentX;
                    const dY = flyingTargetY - dragonCurrentY;
                    const dist = Math.sqrt(dX*dX + dY*dY) || 1;
                    const offsetFactor = dist * 0.3 * (Math.random() * 1.6 - 0.8); // Offset +-40% dist
                    const perpOffsetX = -dY / dist * offsetFactor;
                    const perpOffsetY = dX / dist * offsetFactor;

                    targetX = midX + perpOffsetX;
                    targetY = midY + perpOffsetY;
                    isFlyingStep2 = true;
                }
            } else if (hideTargetElement) { // Apply hiding z-index and opacity if we determined a hiding move
                 dragon.style.zIndex = DRAGON_HIDDEN_Z_INDEX;
                 // Opacity is set within peeking/fullyHidden states
            }


            // --- Clamp positions & Apply Transform ---
            if (dragonState === 'flying') {
                targetX = Math.max(-dragonWidth * 0.2, Math.min(targetX, W - dragonWidth * 0.8)); 
                targetY = Math.max(-dragonHeight * 0.2, Math.min(targetY, H - dragonHeight * 0.8));
            } else if (hideTargetElement) { 
                targetX = Math.max(-dragonWidth * 0.9, Math.min(targetX, W - dragonWidth * 0.1));
                targetY = Math.max(-dragonHeight * 0.9, Math.min(targetY, H - dragonHeight * 0.1));
            }

            if (targetX < dragonCurrentX && Math.abs(targetX - dragonCurrentX) > dragonWidth * 0.05) {
                dragonIsFlipped = true;
            } else if (targetX > dragonCurrentX && Math.abs(targetX - dragonCurrentX) > dragonWidth * 0.05) {
                dragonIsFlipped = false;
            }

            dragon.style.transform = `translate(${targetX}px, ${targetY}px) scaleX(${dragonIsFlipped ? -1 : 1})`;
            dragonCurrentX = targetX;
            dragonCurrentY = targetY;
        }

        function scheduleNextDragonMove() {
            clearTimeout(dragonMoveTimeoutId);

            let pauseDuration = 1000 + Math.random() * 1500; // 1-2.5s pause
            if (dragonState === 'peeking' || dragonState === 'fullyHidden' || dragonState === 'approachingHide') {
                pauseDuration = 600 + Math.random() * 1000; // 0.6-1.6s pause during hiding
            }
            
            const transitionTime = 3000; // From CSS transition: transform
            const totalDelay = transitionTime + pauseDuration;

            dragonMoveTimeoutId = setTimeout(() => {
                updateDragonPosition();
                scheduleNextDragonMove(); 
            }, totalDelay);
        }

        initDragon();

        document.addEventListener("visibilitychange", () => {
            if (!dragon) return;
            clearTimeout(dragonMoveTimeoutId);
            if (document.hidden) {
                dragon.style.opacity = '0'; 
            } else {
                // Restore opacity based on current state
                if (dragonState === 'flying') dragon.style.opacity = '0.85';
                else if (dragonState === 'peeking') dragon.style.opacity = '0.65';
                else if (dragonState === 'fullyHidden' || dragonState === 'approachingHide') dragon.style.opacity = '0.45';
                else dragon.style.opacity = '0.85'; // Default if state is somehow lost

                const cs = getComputedStyle(dragon);
                dragonWidth = parseFloat(cs.width);
                dragonHeight = parseFloat(cs.height);
                
                updateDragonPosition(); 
                scheduleNextDragonMove(); 
            }
        });

    </script>
</body>
</html>
